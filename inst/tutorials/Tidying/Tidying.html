<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />



<meta name="progressive" content="true" />
<meta name="allow-skip" content="true" />

<title>Some Data Tidying</title>


<!-- highlightjs -->
<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



</head>

<body>



<div class="pageContent band">
<div class="bandContent page">

<div class="topics">

<div id="section-motivation-and-reference-material" class="section level2">
<h2>Motivation and Reference Material</h2>
<p>In this tutorial, we will try to follow the data organization principles and data cleaning techniques of the “tidyverse” (a group of R packages designed to streamline this kind of work).</p>
<p>For more (<strong>optional</strong>) reference material, you may consult:</p>
<ul>
<li><a href="http://r4ds.had.co.nz/">R for Data Science e-Book</a></li>
<li><a href="https://stat545.com/">STAT 545 Course notes from UBC</a></li>
<li><a href="https://www.tidyverse.org/learn/">Tidyverse Learning Resources</a></li>
<li><a href="https://cran.r-project.org/web/packages/tidyr/vignettes/tidy-data.html">tidyr package vignette</a></li>
<li><a href="http://garrettgman.github.io/tidying/">Data Tidying from <strong>Data Science with R</strong> by Garrett Grolemund</a></li>
</ul>
<p>Note that for all the examples in this tutorial to work, we also need the <code>tidyverse</code> package, so make sure to add it to your settings chunk if you are going to use these methods:</p>
<pre class="r"><code>require(tidyverse)</code></pre>
</div>
<div id="section-untidy-data" class="section level2">
<h2>Untidy Data</h2>
<p>We will start with two datasets, <code>terrible_demographics</code> and <code>terrible_data</code>.</p>
<p>If you want to play with the datasets on your own outside this tutorial, they are online:</p>
<ul>
<li><a href="https://docs.google.com/spreadsheets/d/e/2PACX-1vR3yEJxW6KNHE1lHPr3K-T4VZHeA_J_KGq_DUb1-Y9sYUd3IUEpliqVLVaJNa69TSRm-fm6WWWu7jS9/pub?gid=0&amp;single=true&amp;output=csv">terrible_demographics</a></li>
<li><a href="https://docs.google.com/spreadsheets/d/e/2PACX-1vTWbGAYFfuwPFciVedTUkeM8fAa6kLJ3aefGVMAz4V0O1Geb-zzDytG3lhevy8JOWV0LGgx5QUzsxFx/pub?gid=0&amp;single=true&amp;output=csv">terrible_data</a></li>
</ul>
<p>Here in the tutorial, first, take a look at them (<code>glimpse()</code> them, and try making a few summary tables or plots).</p>
<p>(The datasets are already loaded for you in the tutorial environment.)</p>
<div class="tutorial-exercise" data-label="explore-untidy-data" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":true,"error":false,"message":true,"exercise.df_print":"paged","exercise.checker":"NULL"}</script>
</div>
</div>
<div id="section-combining-datasets-by-adding-rows" class="section level2">
<h2>Combining datasets by adding rows</h2>
<p>If you have two datasets with the same (or similar) columns, you can simply “paste” them togther. This is the R equivalent of copying all the data rows from one file, and pasting them at the bottom of the other file. For example, perhaps you have datasets containing responses to the same survey for several different years, and you want to put them all together (in that specific case, you’d want to add a <code>Year</code> column to each before you combine them…)</p>
<p>As you imagine, matching columns have to have the same names in the two datasets. If there are some columns that are present in one dataset and not the other, those will be filled in with NAs as needed.</p>
<p>If your “matching” columns do not have the same names in R, you will want to <code>rename()</code> them first before they match. Then, just pass the two (or more) datasets to <code>bind_rows()</code> to paste them together.</p>
<p>As an example, below I artifically split the <code>terrible_demographics</code> dataset into two pieces (the first 25 rows and the last 25 rows), then use <code>bind_rows()</code> to paste them back together.</p>
<pre class="r"><code>first_dataset &lt;- terrible_demographics[1:25,]
second_dataset &lt;- terrible_demographics[26:50,]

both_together &lt;- bind_rows(first_dataset, second_dataset)
glimpse(both_together)</code></pre>
<pre><code>## Observations: 50
## Variables: 7
## $ Name.of.the.person             &lt;fct&gt; Demetra Simoneaux Â , Deloris B...
## $ The.country.they.are.from      &lt;fct&gt; USA, UK, Algeria, USA, UK, UK, ...
## $ whether.they.like.cats.or.dogs &lt;fct&gt; cats, cats, cats, d, d, d, d, d...
## $ Number.in.family               &lt;int&gt; -9, 1, 3, 4, 2, 4, 3, 4, 5, 7, ...
## $ Birthday                       &lt;fct&gt; &quot;December 10, 1937&quot;, &quot;1941-11-1...
## $ coke_or_pepsi                  &lt;int&gt; 1, 1, 0, 1, 1, 0, 1, 0, 0, 0, 0...
## $ fave_color                     &lt;int&gt; 3, 4, 4, 5, 7, 5, 3, 4, 1, 6, 1...</code></pre>
</div>
<div id="section-combining-data-files-by-key" class="section level2">
<h2>Combining data files by key</h2>
<p>To join together several tables using a <strong>key</strong> variable, you want to <code>join</code> them. I very often use <code>left_join()</code> (which means that I want to keep all the rows in the first dataset you name, and no more). Other options are covered at: <a href="https://dplyr.tidyverse.org/reference/join.html" class="uri">https://dplyr.tidyverse.org/reference/join.html</a>.</p>
<p>You can find examples of this in HW2, where we worked with the gapminder dataset.</p>
<p>There is also an awesome set of examples and explanations by Jenny Bryan at: <a href="https://stat545.com/join-cheatsheet.html" class="uri">https://stat545.com/join-cheatsheet.html</a></p>
<p><em>Side note: If you are googling for random R help online and found something she wrote - it’s probably awesome.</em></p>
</div>
<div id="section-keep-only-certain-rows" class="section level2">
<h2>Keep only certain rows</h2>
<p>To keep only certain rows, use <code>filter()</code>. For example, to keep only countries with more than 20 million people:</p>
<pre class="r"><code>countries &lt;- terrible_data %&gt;%
  filter(Population.in.millions &gt; 20)</code></pre>
<p>Or to keep only the entries where <code>The.country.they.are.from</code> is “USA”,</p>
<pre class="r"><code>countries &lt;- terrible_demographics %&gt;%
  filter(The.country.they.are.from == &#39;USA&#39;)</code></pre>
<p>Or to keep only the ones that are either “USA”, “usa”, or “United States”,</p>
<pre class="r"><code>countries &lt;- terrible_demographics %&gt;%
  filter(The.country.they.are.from %in% c(&#39;USA&#39;, &#39;usa&#39;, &#39;United States&#39;))</code></pre>
</div>
<div id="section-keep-only-certain-columns" class="section level2">
<h2>Keep only certain columns</h2>
<p>To keep only certain columns, use <code>select()</code>:</p>
<p>For example to keep only the population column we’d do:</p>
<pre class="r"><code>country &lt;- terrible_data %&gt;%
  select(Population.in.millions)
glimpse(country)</code></pre>
<pre><code>## Observations: 4
## Variables: 1
## $ Population.in.millions &lt;dbl&gt; 327.20, 66.04, 41.32, 24.60</code></pre>
<p>Or to keep <em>everything but</em> that we’d add a <code>-</code>:</p>
<pre class="r"><code>country &lt;- terrible_data %&gt;%
  select(-Population.in.millions)
glimpse(country)</code></pre>
<pre><code>## Observations: 4
## Variables: 2
## $ Country    &lt;fct&gt; USA, UK, ALGERIA, AUSTRALIA
## $ Hemisphere &lt;fct&gt; N, Northern, S, Southern</code></pre>
<p>You can also select (or -select) multiple columns at the same time. For example, to keep only <code>coke_or_pepsi</code> and <code>fave_color</code> from the <code>terrible_demographics</code> data,</p>
<pre class="r"><code>td &lt;- terrible_demographics %&gt;%
  select(coke_or_pepsi, fave_color)
head(td)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["coke_or_pepsi"],"name":[1],"type":["int"],"align":["right"]},{"label":["fave_color"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"1","2":"3","_rn_":"1"},{"1":"1","2":"4","_rn_":"2"},{"1":"0","2":"4","_rn_":"3"},{"1":"1","2":"5","_rn_":"4"},{"1":"1","2":"7","_rn_":"5"},{"1":"0","2":"5","_rn_":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Or to <em>get rid</em> of just those two:</p>
<pre class="r"><code>td &lt;- terrible_demographics %&gt;%
  select(-coke_or_pepsi, -fave_color)
head(td)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Name.of.the.person"],"name":[1],"type":["fctr"],"align":["left"]},{"label":["The.country.they.are.from"],"name":[2],"type":["fctr"],"align":["left"]},{"label":["whether.they.like.cats.or.dogs"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["Number.in.family"],"name":[4],"type":["int"],"align":["right"]},{"label":["Birthday"],"name":[5],"type":["fctr"],"align":["left"]}],"data":[{"1":"Demetra Simoneaux Â","2":"USA","3":"cats","4":"-9","5":"December 10, 1937","_rn_":"1"},{"1":"Deloris Barham Â","2":"UK","3":"cats","4":"1","5":"1941-11-14","_rn_":"2"},{"1":"Marilynn Bousquet Â","2":"Algeria","3":"cats","4":"3","5":"1995-10-19","_rn_":"3"},{"1":"Freida Howland Â","2":"USA","3":"d","4":"4","5":"November 10, 2009","_rn_":"4"},{"1":"Herta Polansky Â","2":"UK","3":"d","4":"2","5":"March 22, 1963","_rn_":"5"},{"1":"Blair Machin Â","2":"UK","3":"d","4":"4","5":"May 30, 1948","_rn_":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="section-renaming-variables" class="section level2">
<h2>Renaming variables</h2>
<p>This is easy! Just use <code>rename()</code>:</p>
<pre class="r"><code>glimpse(terrible_data)</code></pre>
<pre><code>## Observations: 4
## Variables: 3
## $ Country                &lt;fct&gt; USA, UK, ALGERIA, AUSTRALIA
## $ Hemisphere             &lt;fct&gt; N, Northern, S, Southern
## $ Population.in.millions &lt;dbl&gt; 327.20, 66.04, 41.32, 24.60</code></pre>
<pre class="r"><code>country &lt;- terrible_data %&gt;%
  rename(population = Population.in.millions)
glimpse(country)</code></pre>
<pre><code>## Observations: 4
## Variables: 3
## $ Country    &lt;fct&gt; USA, UK, ALGERIA, AUSTRALIA
## $ Hemisphere &lt;fct&gt; N, Northern, S, Southern
## $ population &lt;dbl&gt; 327.20, 66.04, 41.32, 24.60</code></pre>
</div>
<div id="section-creating-new-variables" class="section level2">
<h2>Creating new variables</h2>
<p>If we want to make a new variable by modifying or combining some existing ones (or from scratch), we use <code>mutate()</code>.</p>
<div id="section-arithmetic-and-mathematical-functions" class="section level3">
<h3>Arithmetic and mathematical functions</h3>
<p>We can do arithmetic or apply mathematical functions to one or more existing variables. To create a variable that is population times two, and another that is the base 10 log of the population:</p>
<pre class="r"><code>country_data &lt;- terrible_data %&gt;%
  mutate(double_pop = 2*Population.in.millions,
         logpop = log10(Population.in.millions*1e6))
glimpse(country_data)</code></pre>
<pre><code>## Observations: 4
## Variables: 5
## $ Country                &lt;fct&gt; USA, UK, ALGERIA, AUSTRALIA
## $ Hemisphere             &lt;fct&gt; N, Northern, S, Southern
## $ Population.in.millions &lt;dbl&gt; 327.20, 66.04, 41.32, 24.60
## $ double_pop             &lt;dbl&gt; 654.40, 132.08, 82.64, 49.20
## $ logpop                 &lt;dbl&gt; 8.514813, 7.819807, 7.616160, 7.390935</code></pre>
</div>
<div id="section-quantitative-to-categorical" class="section level3">
<h3>Quantitative to Categorical</h3>
<p>We can also make categorical variables from other variables, depending on whether some condition is met.</p>
<p>For example, to make a new categorical variable that indicates whether or not a country’s population is above 30 million, we could use <code>mutate()</code> with <code>ifelse()</code>.</p>
<p>(<code>ifelse()</code> takes three inputs: first, a logical condition; second, the value the variable should have if the condition is TRUE; third, the value the variable should have if the condition if FALSE.)</p>
<pre class="r"><code>country_data &lt;- terrible_data %&gt;%
  mutate(pop = ifelse(Population.in.millions &gt;= 30, 
                               &quot;Above 30 million&quot;, 
                               &quot;Below 30 million&quot;))
glimpse(country_data)</code></pre>
<pre><code>## Observations: 4
## Variables: 4
## $ Country                &lt;fct&gt; USA, UK, ALGERIA, AUSTRALIA
## $ Hemisphere             &lt;fct&gt; N, Northern, S, Southern
## $ Population.in.millions &lt;dbl&gt; 327.20, 66.04, 41.32, 24.60
## $ pop                    &lt;chr&gt; &quot;Above 30 million&quot;, &quot;Above 30 million&quot;,...</code></pre>
</div>
</div>
<div id="section-ifelse" class="section level2">
<h2>ifelse</h2>
<p>Previously we used the function <code>ifelse()</code> to make a two-category categorical variable from a quantitative one. But we can use it much more generally than that, anytime we want to make a categorical variable with two possible values.</p>
<p>Recall, <code>ifelse()</code> takes three inputs: first, a logical condition; second, the value the variable should have if the condition is TRUE; third, the value the variable should have if the condition if FALSE.</p>
<p>We use it with <code>mutate()</code> to make new variables.</p>
<div id="section-recoding-from-01-to-words" class="section level3">
<h3>Recoding from 0/1 to words</h3>
<p>Often we want to recode variables from logical (0 or 1) to words. (The logical format is fine if it’s 100% clear what 0 should be and what 1 should be - otherwise words are less confusing.) For example, <code>terrible_demographics</code> has variable <code>coke_or_pepsi</code> which is 0 if a person prefers Pepsi and 1 if they prefer Coke. We could make that clearer by changing from 0 and 1 to words:</p>
<pre class="r"><code>demo &lt;- terrible_demographics %&gt;%
  mutate(coke_or_pepsi = ifelse(coke_or_pepsi == 1, &#39;Coke&#39;, &#39;Pepsi&#39;))
glimpse(demo)</code></pre>
<pre><code>## Observations: 50
## Variables: 7
## $ Name.of.the.person             &lt;fct&gt; Demetra Simoneaux Â , Deloris B...
## $ The.country.they.are.from      &lt;fct&gt; USA, UK, Algeria, USA, UK, UK, ...
## $ whether.they.like.cats.or.dogs &lt;fct&gt; cats, cats, cats, d, d, d, d, d...
## $ Number.in.family               &lt;int&gt; -9, 1, 3, 4, 2, 4, 3, 4, 5, 7, ...
## $ Birthday                       &lt;fct&gt; &quot;December 10, 1937&quot;, &quot;1941-11-1...
## $ coke_or_pepsi                  &lt;chr&gt; &quot;Coke&quot;, &quot;Coke&quot;, &quot;Pepsi&quot;, &quot;Coke&quot;...
## $ fave_color                     &lt;int&gt; 3, 4, 4, 5, 7, 5, 3, 4, 1, 6, 1...</code></pre>
<p><em>Remember in R you use two equal signs (<code>==</code>) in logical conditions. The single equal sign <code>=</code> is (mostly) reserved for pairing input names and values inside functions.</em></p>
</div>
<div id="section-recoding-from-more-than-two-categories-to-two" class="section level3">
<h3>Recoding from more than two categories to two</h3>
<p>What if we have a variable with multiple possible values, and we want to re-envision it as a binary variable? <code>ifelse()</code> can help with that.</p>
<p>For example, consider using the variable <code>The.country.they.are.from</code> (<em>who named that!?!</em>) to create a new variable <code>country</code> with values “USA” and “other”.</p>
<p>First, remember that this dataset is a mess:</p>
<pre class="r"><code>tally(~The.country.they.are.from, data = terrible_demographics)</code></pre>
<pre><code>## The.country.they.are.from
##                        -999                     Algeria      australa 
##             2             1             1             1             1 
##     Australia     AUSTRALIA            uk            UK United States 
##             4             1            13             6             1 
##           usa           USA 
##            14             5</code></pre>
<p>A first try at making our <code>country</code> variable might be:</p>
<pre class="r"><code>usa_data &lt;- terrible_demographics %&gt;%
  mutate(country = ifelse(The.country.they.are.from == &#39;USA&#39;, &#39;USA&#39;, &#39;Other&#39;))
glimpse(usa_data)</code></pre>
<pre><code>## Observations: 50
## Variables: 8
## $ Name.of.the.person             &lt;fct&gt; Demetra Simoneaux Â , Deloris B...
## $ The.country.they.are.from      &lt;fct&gt; USA, UK, Algeria, USA, UK, UK, ...
## $ whether.they.like.cats.or.dogs &lt;fct&gt; cats, cats, cats, d, d, d, d, d...
## $ Number.in.family               &lt;int&gt; -9, 1, 3, 4, 2, 4, 3, 4, 5, 7, ...
## $ Birthday                       &lt;fct&gt; &quot;December 10, 1937&quot;, &quot;1941-11-1...
## $ coke_or_pepsi                  &lt;int&gt; 1, 1, 0, 1, 1, 0, 1, 0, 0, 0, 0...
## $ fave_color                     &lt;int&gt; 3, 4, 4, 5, 7, 5, 3, 4, 1, 6, 1...
## $ country                        &lt;chr&gt; &quot;USA&quot;, &quot;Other&quot;, &quot;Other&quot;, &quot;USA&quot;,...</code></pre>
<pre class="r"><code>tally(~country | The.country.they.are.from, data = usa_data)</code></pre>
<pre><code>##        The.country.they.are.from
## country    -999    Algeria australa Australia AUSTRALIA uk UK
##   Other  2    1  1       1        1         4         1 13  6
##   USA    0    0  0       0        0         0         0  0  0
##        The.country.they.are.from
## country United States usa USA
##   Other             1  14   0
##   USA               0   0   5</code></pre>
<p>Notice that this will not include spelling variants “usa” and “United States” in our new “USA” category. We could go back and clean up the possible values of <code>The.country.they.are.from</code> before creating our new <code>country</code> variable, of course, but if we want to take care of it here, we could use “or” (<code>|</code>) in our condition:</p>
<pre class="r"><code>usa_data &lt;- terrible_demographics %&gt;%
  mutate(country = ifelse(The.country.they.are.from == &#39;USA&#39; |
                            The.country.they.are.from == &#39;usa&#39; | 
                            The.country.they.are.from == &#39;United States&#39;,
                          &#39;USA&#39;,
                          &#39;Other&#39;))
glimpse(usa_data)</code></pre>
<pre><code>## Observations: 50
## Variables: 8
## $ Name.of.the.person             &lt;fct&gt; Demetra Simoneaux Â , Deloris B...
## $ The.country.they.are.from      &lt;fct&gt; USA, UK, Algeria, USA, UK, UK, ...
## $ whether.they.like.cats.or.dogs &lt;fct&gt; cats, cats, cats, d, d, d, d, d...
## $ Number.in.family               &lt;int&gt; -9, 1, 3, 4, 2, 4, 3, 4, 5, 7, ...
## $ Birthday                       &lt;fct&gt; &quot;December 10, 1937&quot;, &quot;1941-11-1...
## $ coke_or_pepsi                  &lt;int&gt; 1, 1, 0, 1, 1, 0, 1, 0, 0, 0, 0...
## $ fave_color                     &lt;int&gt; 3, 4, 4, 5, 7, 5, 3, 4, 1, 6, 1...
## $ country                        &lt;chr&gt; &quot;USA&quot;, &quot;Other&quot;, &quot;Other&quot;, &quot;USA&quot;,...</code></pre>
<pre class="r"><code>tally(~country | The.country.they.are.from, data = usa_data)</code></pre>
<pre><code>##        The.country.they.are.from
## country    -999    Algeria australa Australia AUSTRALIA uk UK
##   Other  2    1  1       1        1         4         1 13  6
##   USA    0    0  0       0        0         0         0  0  0
##        The.country.they.are.from
## country United States usa USA
##   Other             0   0   0
##   USA               1  14   5</code></pre>
</div>
</div>
<div id="section-create-categorical-variables-with-more-than-two-categories" class="section level2">
<h2>Create categorical variables with more than two categories</h2>
<p>What if you want to do something kind of like <code>ifelse()</code> does, but with more than just two possible values for the resulting categorical variable?</p>
<p>For example, the <code>terrible_demographics</code> data has variable <code>fave_color</code> which takes on integer values 1-7, representing colors red, orange, yellow, green, blue, indigo, and violet. What if we wanted to use the names of the colors (rather than the numbers) as the variable values? We can use <code>case_when()</code>.</p>
<p>The <code>case_when()</code> function uses the input format:</p>
<pre class="r"><code>data &lt;- data %&gt;%
  mutate(new_variable_name = case_when( logical condition ~ &quot;new variable value&quot;,
                                        another condtion ~ &quot;2nd new value&quot;,
                                        another condition ~ &quot;3rd new value&quot;,
                                        TRUE ~ &quot;last new value&quot;))</code></pre>
<p>A concrete example with the <code>fave_color</code> variable:</p>
<pre class="r"><code>countries &lt;- terrible_demographics %&gt;%
  mutate(fave_color2 = case_when(fave_color == 1 ~ &#39;red&#39;,
                                 fave_color == 2 ~ &#39;orange&#39;,
                                 fave_color == 3 ~ &#39;yellow&#39;,
                                 fave_color == 4 ~ &#39;green&#39;,
                                 fave_color == 5 ~ &#39;blue&#39;,
                                 fave_color == 6 ~ &#39;indigo&#39;,
                                 fave_color == 7 ~ &#39;violet&#39;,
                                 TRUE            ~ &#39;other&#39;))
head(countries)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Name.of.the.person"],"name":[1],"type":["fctr"],"align":["left"]},{"label":["The.country.they.are.from"],"name":[2],"type":["fctr"],"align":["left"]},{"label":["whether.they.like.cats.or.dogs"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["Number.in.family"],"name":[4],"type":["int"],"align":["right"]},{"label":["Birthday"],"name":[5],"type":["fctr"],"align":["left"]},{"label":["coke_or_pepsi"],"name":[6],"type":["int"],"align":["right"]},{"label":["fave_color"],"name":[7],"type":["int"],"align":["right"]},{"label":["fave_color2"],"name":[8],"type":["chr"],"align":["left"]}],"data":[{"1":"Demetra Simoneaux Â","2":"USA","3":"cats","4":"-9","5":"December 10, 1937","6":"1","7":"3","8":"yellow","_rn_":"1"},{"1":"Deloris Barham Â","2":"UK","3":"cats","4":"1","5":"1941-11-14","6":"1","7":"4","8":"green","_rn_":"2"},{"1":"Marilynn Bousquet Â","2":"Algeria","3":"cats","4":"3","5":"1995-10-19","6":"0","7":"4","8":"green","_rn_":"3"},{"1":"Freida Howland Â","2":"USA","3":"d","4":"4","5":"November 10, 2009","6":"1","7":"5","8":"blue","_rn_":"4"},{"1":"Herta Polansky Â","2":"UK","3":"d","4":"2","5":"March 22, 1963","6":"1","7":"7","8":"violet","_rn_":"5"},{"1":"Blair Machin Â","2":"UK","3":"d","4":"4","5":"May 30, 1948","6":"0","7":"5","8":"blue","_rn_":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p><em>The TRUE line at the end is a catchall for all possible cases that don’t meet any of the conditions yet specified.</em></p>
</div>
<div id="section-convert-between-wide-and-long-formats-spread-and-gather" class="section level2">
<h2>Convert between “wide” and “long” formats: Spread and Gather</h2>
<p>If you have multiple columns that you want to combine into one, or one column that you want to split into many, check out: <a href="https://r4ds.had.co.nz/tidy-data.html#spreading-and-gathering" class="uri">https://r4ds.had.co.nz/tidy-data.html#spreading-and-gathering</a></p>
<p>Also see me with your specific example if you want help with it.</p>
</div>
<div id="section-split-a-column-in-two" class="section level2">
<h2>Split a column in two</h2>
<p>Sometimes, you have a column like “Oct 20, 1997” or “Protestant, Christian Reformed” or “heroin and cocaine” and you want to split it into two parts stored in two different variables. (keep just the Oct 20, or the 1997, or the Protestant, or the Christian Reformed, or the heroin, or the cocaine – basically you want to split at a “,” or at “and”, etc.)</p>
<p>We can use <code>separate</code> from package <code>tidyr</code> to do this.</p>
<p>For example, the <code>terrible_demographics</code> data has a column <code>Birthday</code> that (for some people, at least) gives the date in the format: Month Day, Year. What if we want to split those at the comma?</p>
<p>For <code>separate()</code>, the input <code>into</code> gives a list of column names for the new columns created by separating the old on; the input <code>sep</code> tells where to make the splits (<code>sep = ','</code> tells R to split at each comma).</p>
<pre class="r"><code>demo &lt;- terrible_demographics %&gt;%
  separate(Birthday, into = c(&#39;Day&#39;, &#39;Year&#39;), sep = &#39;,&#39;)</code></pre>
<pre><code>## Warning: Expected 2 pieces. Missing pieces filled with `NA` in 25 rows
## [2, 3, 8, 11, 14, 15, 16, 18, 20, 24, 25, 27, 29, 30, 31, 33, 39, 40, 42,
## 43, ...].</code></pre>
<pre class="r"><code>head(demo)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Name.of.the.person"],"name":[1],"type":["fctr"],"align":["left"]},{"label":["The.country.they.are.from"],"name":[2],"type":["fctr"],"align":["left"]},{"label":["whether.they.like.cats.or.dogs"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["Number.in.family"],"name":[4],"type":["int"],"align":["right"]},{"label":["Day"],"name":[5],"type":["chr"],"align":["left"]},{"label":["Year"],"name":[6],"type":["chr"],"align":["left"]},{"label":["coke_or_pepsi"],"name":[7],"type":["int"],"align":["right"]},{"label":["fave_color"],"name":[8],"type":["int"],"align":["right"]}],"data":[{"1":"Demetra Simoneaux Â","2":"USA","3":"cats","4":"-9","5":"December 10","6":"1937","7":"1","8":"3","_rn_":"1"},{"1":"Deloris Barham Â","2":"UK","3":"cats","4":"1","5":"1941-11-14","6":"NA","7":"1","8":"4","_rn_":"2"},{"1":"Marilynn Bousquet Â","2":"Algeria","3":"cats","4":"3","5":"1995-10-19","6":"NA","7":"0","8":"4","_rn_":"3"},{"1":"Freida Howland Â","2":"USA","3":"d","4":"4","5":"November 10","6":"2009","7":"1","8":"5","_rn_":"4"},{"1":"Herta Polansky Â","2":"UK","3":"d","4":"2","5":"March 22","6":"1963","7":"1","8":"7","_rn_":"5"},{"1":"Blair Machin Â","2":"UK","3":"d","4":"4","5":"May 30","6":"1948","7":"0","8":"5","_rn_":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>(<em>In this case, it worked perfectly for the dates formatted like “October 21, 2019”, and unsurprisingly it did not at all for ones formatted like “10-21-2019”…</em>)</p>
<p>For more examples, see: <a href="https://r4ds.had.co.nz/tidy-data.html#separating-and-uniting" class="uri">https://r4ds.had.co.nz/tidy-data.html#separating-and-uniting</a>.</p>
</div>
<div id="section-change-variable-type" class="section level2">
<h2>Change variable type</h2>
<p>R has several main variable types that we use: “factor” variables a categorical ones, but so are “character” variables. One difference is that R “knows” the allowable levels or values for “factors”. (Another is the way they are stored and represented internally.) If you want to manipulate the values of a categorical variable, it will probably be better to change to a “character” variable first.</p>
<p>If you want to use a variable as a categorical predictor in a model or graph, you can force this behavior by asking R to treat is as a factor or character.</p>
<p>You can convert between variable types by using functions <code>as.character()</code>, <code>factor()</code>, and <code>as.numeric()</code> to get the one you want.</p>
<p>For example, to force R to treat the variable <code>Hemisphere</code> as “character”, use:</p>
<pre class="r"><code>countries &lt;- terrible_data %&gt;%
  mutate(Hemisphere = as.character(Hemisphere))
glimpse(countries)</code></pre>
<pre><code>## Observations: 4
## Variables: 3
## $ Country                &lt;fct&gt; USA, UK, ALGERIA, AUSTRALIA
## $ Hemisphere             &lt;chr&gt; &quot;N&quot;, &quot;Northern&quot;, &quot;S&quot;, &quot;Southern&quot;
## $ Population.in.millions &lt;dbl&gt; 327.20, 66.04, 41.32, 24.60</code></pre>
<p><em>Note: be careful with <code>as.numeric()</code> though - it may not be as smart as you hope! See the next section…</em></p>
<div id="section-numbers-hiding-in-text" class="section level3">
<h3>Numbers hiding in text</h3>
<p>There’s also a nifty way to extract just numbers from character variables – see <a href="https://readr.tidyverse.org/reference/parse_number.html">online help for <code>parse_number</code></a></p>
</div>
</div>
<div id="section-change-combine-or-correct-factor-levels" class="section level2">
<h2>Change, combine, or correct factor levels</h2>
<p>Correcting mistakes in the values of categorical variables can get complicated!</p>
<p>Check out:</p>
<ul>
<li><a href="https://cran.r-project.org/web/packages/forcats/vignettes/forcats.html" class="uri">https://cran.r-project.org/web/packages/forcats/vignettes/forcats.html</a></li>
<li><a href="https://stat545.com/factors-boss.html" class="uri">https://stat545.com/factors-boss.html</a></li>
</ul>
<p>And then see if you can fix some of the problems with the terrible datasets…</p>
<div class="tutorial-exercise" data-label="forcats-play" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":true,"error":false,"message":true,"exercise.df_print":"paged","exercise.checker":"NULL"}</script>
</div>
</div>
<div id="section-make-corrections-to-string-character-data" class="section level2">
<h2>Make corrections to string (character) data</h2>
<p>Look at the names of the people in the <code>terrible_demographics</code> data.</p>
<p>For some reason they all have a strange <span class="math inline">\(\hat{A}\)</span> at the end. Let’s remove those:</p>
<pre class="r"><code>demo &lt;- terrible_demographics %&gt;%
  rename(name = Name.of.the.person) %&gt;%
  # note: for this I did copy/paste the offending character
  mutate(name = stringr::str_remove(name, &#39;Â&#39;))
glimpse(demo)  </code></pre>
<pre><code>## Observations: 50
## Variables: 7
## $ name                           &lt;chr&gt; &quot;Demetra Simoneaux  &quot;, &quot;Deloris...
## $ The.country.they.are.from      &lt;fct&gt; USA, UK, Algeria, USA, UK, UK, ...
## $ whether.they.like.cats.or.dogs &lt;fct&gt; cats, cats, cats, d, d, d, d, d...
## $ Number.in.family               &lt;int&gt; -9, 1, 3, 4, 2, 4, 3, 4, 5, 7, ...
## $ Birthday                       &lt;fct&gt; &quot;December 10, 1937&quot;, &quot;1941-11-1...
## $ coke_or_pepsi                  &lt;int&gt; 1, 1, 0, 1, 1, 0, 1, 0, 0, 0, 0...
## $ fave_color                     &lt;int&gt; 3, 4, 4, 5, 7, 5, 3, 4, 1, 6, 1...</code></pre>
<p>Better, but now there is random white space at the end of each name. We can also remove that with <code>stringr::trim_white()</code>:</p>
<pre class="r"><code>demo &lt;- terrible_demographics %&gt;%
  rename(name = Name.of.the.person) %&gt;%
  # note: for this I did copy/paste the offending character
  mutate(name = stringr::str_remove(name, &#39;Â&#39;),
         name = stringr::str_trim(name, side = &quot;right&quot;))
glimpse(demo) </code></pre>
<pre><code>## Observations: 50
## Variables: 7
## $ name                           &lt;chr&gt; &quot;Demetra Simoneaux&quot;, &quot;Deloris B...
## $ The.country.they.are.from      &lt;fct&gt; USA, UK, Algeria, USA, UK, UK, ...
## $ whether.they.like.cats.or.dogs &lt;fct&gt; cats, cats, cats, d, d, d, d, d...
## $ Number.in.family               &lt;int&gt; -9, 1, 3, 4, 2, 4, 3, 4, 5, 7, ...
## $ Birthday                       &lt;fct&gt; &quot;December 10, 1937&quot;, &quot;1941-11-1...
## $ coke_or_pepsi                  &lt;int&gt; 1, 1, 0, 1, 1, 0, 1, 0, 0, 0, 0...
## $ fave_color                     &lt;int&gt; 3, 4, 4, 5, 7, 5, 3, 4, 1, 6, 1...</code></pre>
<p>Better!</p>
<p>(The options for <code>side</code> are “left”, “right”, and “both”.)</p>
<p>There are many other things you might need to do with character data. For more information and examples, check out: <a href="https://stringr.tidyverse.org/index.html" class="uri">https://stringr.tidyverse.org/index.html</a> or the <a href="https://github.com/rstudio/cheatsheets/blob/master/strings.pdf">stringr package cheatsheet</a></p>
</div>
<div id="section-missing-value-codes" class="section level2">
<h2>Missing value “codes”</h2>
<p>Sometimes people use values (like -999, etc.) to indicate when data is missing. You don’t want to accidentally treat these values as “real” numbers (or categories) in your analysis!</p>
<p>The simplest way to get rid of them is right when you are reading in your data. If you use <code>read.csv()</code>, just add the input <code>na.strings = c('your value')</code></p>
<p>For example, if you wanted every entry that is “space” (" “) or”two spaces" (" “) or”unknown" to be interpreted as missing data, you would do:</p>
<pre class="r"><code>my_data &lt;- read.csv(&#39;my_file.csv&#39;, na.strings = c(&#39; &#39;, &#39;  &#39;, &#39;unknown&#39;))</code></pre>
<p>If <em>numeric</em> variables contain <em>valid numeric values</em> like -999 that you would like to interpret as NA, you will have to replace them specifically. There are some of these in our <code>terrible_demographics</code> data: it looks like -9 has been used as code for missing data in the variable <code>Number.in.family</code>. We can replace all -9s in that variable using <code>ifelse()</code>:</p>
<pre class="r"><code>demo &lt;- terrible_demographics %&gt;%
  mutate(num_in_fam = ifelse(Number.in.family == -9, NA, Number.in.family))
glimpse(demo)</code></pre>
<pre><code>## Observations: 50
## Variables: 8
## $ Name.of.the.person             &lt;fct&gt; Demetra Simoneaux Â , Deloris B...
## $ The.country.they.are.from      &lt;fct&gt; USA, UK, Algeria, USA, UK, UK, ...
## $ whether.they.like.cats.or.dogs &lt;fct&gt; cats, cats, cats, d, d, d, d, d...
## $ Number.in.family               &lt;int&gt; -9, 1, 3, 4, 2, 4, 3, 4, 5, 7, ...
## $ Birthday                       &lt;fct&gt; &quot;December 10, 1937&quot;, &quot;1941-11-1...
## $ coke_or_pepsi                  &lt;int&gt; 1, 1, 0, 1, 1, 0, 1, 0, 0, 0, 0...
## $ fave_color                     &lt;int&gt; 3, 4, 4, 5, 7, 5, 3, 4, 1, 6, 1...
## $ num_in_fam                     &lt;int&gt; NA, 1, 3, 4, 2, 4, 3, 4, 5, 7, ...</code></pre>
<p>The code above tells R, “Make a new variable <code>num_in_fam</code> from the variable <code>Number.in.family</code>. If <code>Number.in.family</code> is -9, change it to NA (missing), and if it is not, then leave it alone.”</p>
</div>
<div id="section-dates-and-times" class="section level2">
<h2>Dates and Times</h2>
<p>If you are going to work with date/time data, I recommend the package <code>lubridate</code>. It can be used to parse date-time variables (even if they are in multiple formats!) and work with them. Help and examples are online at: <a href="https://r4ds.had.co.nz/dates-and-times.html" class="uri">https://r4ds.had.co.nz/dates-and-times.html</a></p>
<p>To use this package, basically you first need to convert your variables (or create new ones) to date-time types in R. <code>lubridate</code> can do this with a set of functions <em>named after the format/order of the input data they accept</em> – for example, <code>mdy()</code> makes date-time variables from variables that give month, day, year; <code>ymd()</code> does it with variables that give year, month, day; <code>mdy_hms()</code> works with year, month, day, hour, minute, second; and so on.</p>
<p>As one example, we can clean up the <code>Birthday</code> variable from the <code>terrible_demographics</code> dataset:</p>
<pre class="r"><code>terrible_demographics %&gt;% select(Birthday) %&gt;% head()</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Birthday"],"name":[1],"type":["fctr"],"align":["left"]}],"data":[{"1":"December 10, 1937","_rn_":"1"},{"1":"1941-11-14","_rn_":"2"},{"1":"1995-10-19","_rn_":"3"},{"1":"November 10, 2009","_rn_":"4"},{"1":"March 22, 1963","_rn_":"5"},{"1":"May 30, 1948","_rn_":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Note that some entries are month, day, year and some are year, month, day – so we will have to parse both and then put them back together…</p>
<pre class="r"><code>require(lubridate)</code></pre>
<pre><code>## Loading required package: lubridate</code></pre>
<pre><code>## 
## Attaching package: &#39;lubridate&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:base&#39;:
## 
##     date</code></pre>
<pre class="r"><code>demo &lt;- terrible_demographics %&gt;%
  mutate(birthday_datetime = mdy(Birthday),
         birthday_datetime2 = ymd(Birthday))</code></pre>
<pre><code>## Warning: 25 failed to parse.

## Warning: 25 failed to parse.</code></pre>
<pre class="r"><code>glimpse(demo)</code></pre>
<pre><code>## Observations: 50
## Variables: 9
## $ Name.of.the.person             &lt;fct&gt; Demetra Simoneaux Â , Deloris B...
## $ The.country.they.are.from      &lt;fct&gt; USA, UK, Algeria, USA, UK, UK, ...
## $ whether.they.like.cats.or.dogs &lt;fct&gt; cats, cats, cats, d, d, d, d, d...
## $ Number.in.family               &lt;int&gt; -9, 1, 3, 4, 2, 4, 3, 4, 5, 7, ...
## $ Birthday                       &lt;fct&gt; &quot;December 10, 1937&quot;, &quot;1941-11-1...
## $ coke_or_pepsi                  &lt;int&gt; 1, 1, 0, 1, 1, 0, 1, 0, 0, 0, 0...
## $ fave_color                     &lt;int&gt; 3, 4, 4, 5, 7, 5, 3, 4, 1, 6, 1...
## $ birthday_datetime              &lt;date&gt; 1937-12-10, NA, NA, 2009-11-10...
## $ birthday_datetime2             &lt;date&gt; NA, 1941-11-14, 1995-10-19, NA...</code></pre>
<p>Worked great, but now our birthday data is in two columns; let’s put it back into one using <code>ifelse()</code>.</p>
<pre class="r"><code>demo &lt;- terrible_demographics %&gt;%
  mutate(birthday_datetime = mdy(Birthday),
         birthday_datetime2 = ymd(Birthday),
         # if birthday_datetime is missing, use birthday_datetime2
         birthday_all = ifelse(is.na(birthday_datetime), 
                               birthday_datetime2,
                               birthday_datetime))</code></pre>
<pre><code>## Warning: 25 failed to parse.

## Warning: 25 failed to parse.</code></pre>
<pre class="r"><code>glimpse(demo)</code></pre>
<pre><code>## Observations: 50
## Variables: 10
## $ Name.of.the.person             &lt;fct&gt; Demetra Simoneaux Â , Deloris B...
## $ The.country.they.are.from      &lt;fct&gt; USA, UK, Algeria, USA, UK, UK, ...
## $ whether.they.like.cats.or.dogs &lt;fct&gt; cats, cats, cats, d, d, d, d, d...
## $ Number.in.family               &lt;int&gt; -9, 1, 3, 4, 2, 4, 3, 4, 5, 7, ...
## $ Birthday                       &lt;fct&gt; &quot;December 10, 1937&quot;, &quot;1941-11-1...
## $ coke_or_pepsi                  &lt;int&gt; 1, 1, 0, 1, 1, 0, 1, 0, 0, 0, 0...
## $ fave_color                     &lt;int&gt; 3, 4, 4, 5, 7, 5, 3, 4, 1, 6, 1...
## $ birthday_datetime              &lt;date&gt; 1937-12-10, NA, NA, 2009-11-10...
## $ birthday_datetime2             &lt;date&gt; NA, 1941-11-14, 1995-10-19, NA...
## $ birthday_all                   &lt;dbl&gt; -11710, -10275, 9422, 14558, -2...</code></pre>
<p>Argh! Now our nice date-times are changed to random-looking numbers. <code>lubridate::as_date()</code>, change them back!</p>
<pre class="r"><code>demo &lt;- terrible_demographics %&gt;%
  mutate(birthday_datetime = mdy(Birthday),
         birthday_datetime2 = ymd(Birthday),
         # if birthday_datetime is missing, use birthday_datetime2
         birthday_all = ifelse(is.na(birthday_datetime), 
                               birthday_datetime2,
                               birthday_datetime),
         # make sure the final result is a date-time value
         birthday_all = as_date(birthday_all))</code></pre>
<pre><code>## Warning: 25 failed to parse.

## Warning: 25 failed to parse.</code></pre>
<pre class="r"><code>glimpse(demo)</code></pre>
<pre><code>## Observations: 50
## Variables: 10
## $ Name.of.the.person             &lt;fct&gt; Demetra Simoneaux Â , Deloris B...
## $ The.country.they.are.from      &lt;fct&gt; USA, UK, Algeria, USA, UK, UK, ...
## $ whether.they.like.cats.or.dogs &lt;fct&gt; cats, cats, cats, d, d, d, d, d...
## $ Number.in.family               &lt;int&gt; -9, 1, 3, 4, 2, 4, 3, 4, 5, 7, ...
## $ Birthday                       &lt;fct&gt; &quot;December 10, 1937&quot;, &quot;1941-11-1...
## $ coke_or_pepsi                  &lt;int&gt; 1, 1, 0, 1, 1, 0, 1, 0, 0, 0, 0...
## $ fave_color                     &lt;int&gt; 3, 4, 4, 5, 7, 5, 3, 4, 1, 6, 1...
## $ birthday_datetime              &lt;date&gt; 1937-12-10, NA, NA, 2009-11-10...
## $ birthday_datetime2             &lt;date&gt; NA, 1941-11-14, 1995-10-19, NA...
## $ birthday_all                   &lt;date&gt; 1937-12-10, 1941-11-14, 1995-1...</code></pre>
</div>
<div id="section-other-data-file-formats" class="section level2">
<h2>Other Data File Formats</h2>
<p>This tutorial provides a few examples and practice with basic techniques. One thing <em>not</em> covered so far is reading in your data, if it is stored in a file format <em>other</em> than a .csv file. Below are a few examples of reading in data in other formats.</p>
<div id="section-excel" class="section level3">
<h3>Excel</h3>
<p>You can read in data directly from Excel files (.xls or .xlsx).</p>
<pre class="r"><code>require(readxl)</code></pre>
<pre><code>## Loading required package: readxl</code></pre>
<pre class="r"><code>dsets &lt;- read_excel(&quot;data/datasets.xlsx&quot;)
head(dsets)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Sepal.Length"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["Sepal.Width"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["Petal.Length"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["Petal.Width"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["Species"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"5.1","2":"3.5","3":"1.4","4":"0.2","5":"setosa"},{"1":"4.9","2":"3.0","3":"1.4","4":"0.2","5":"setosa"},{"1":"4.7","2":"3.2","3":"1.3","4":"0.2","5":"setosa"},{"1":"4.6","2":"3.1","3":"1.5","4":"0.2","5":"setosa"},{"1":"5.0","2":"3.6","3":"1.4","4":"0.2","5":"setosa"},{"1":"5.4","2":"3.9","3":"1.7","4":"0.4","5":"setosa"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>If there are multiple sheets in the Excel file, the code above will just read in the <strong>first</strong> one. To figure out what the names of the sheets in the file are, you can run:</p>
<pre class="r"><code>excel_sheets(&quot;data/datasets.xlsx&quot;)</code></pre>
<pre><code>## [1] &quot;iris&quot;     &quot;mtcars&quot;   &quot;chickwts&quot; &quot;quakes&quot;</code></pre>
<p>And to read in a specific sheet, use the input <code>sheet</code>:</p>
<pre class="r"><code>chick_data &lt;- read_excel(&quot;data/datasets.xlsx&quot;,
                         sheet = &#39;chickwts&#39;)
glimpse(chick_data)</code></pre>
<pre><code>## Observations: 71
## Variables: 2
## $ weight &lt;dbl&gt; 179, 160, 136, 227, 217, 168, 108, 124, 143, 140, 309, ...
## $ feed   &lt;chr&gt; &quot;horsebean&quot;, &quot;horsebean&quot;, &quot;horsebean&quot;, &quot;horsebean&quot;, &quot;ho...</code></pre>
<p>More help and examples are at: <a href="https://readxl.tidyverse.org/" class="uri">https://readxl.tidyverse.org/</a>.</p>
</div>
<div id="section-stata-.dta-files" class="section level3">
<h3>STATA (.dta) files</h3>
<p>You can read in data from .dta files using the package <code>foreign</code>:</p>
<pre class="r"><code>require(foreign)</code></pre>
<pre><code>## Loading required package: foreign</code></pre>
<pre class="r"><code>contraceptive_use &lt;- read.dta(&#39;https://data.princeton.edu/wws509/datasets/cusew.dta&#39;)</code></pre>
</div>
<div id="section-other-text-files" class="section level3">
<h3>Other Text Files</h3>
<p>You can read in data from general text files (.txt, .dat, and more) using <code>read_table()</code> from package <code>readr</code>. There are quite a few options - see help at <a href="https://www.rdocumentation.org/packages/readr/versions/1.3.1/topics/read_table" class="uri">https://www.rdocumentation.org/packages/readr/versions/1.3.1/topics/read_table</a> if needed.</p>
<p>Here is a simple example for a text file with a header row:</p>
<pre class="r"><code>require(readr)
contraceptive_use &lt;- read_table(&#39;https://data.princeton.edu/wws509/datasets/cuse.dat&#39;)</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   age = col_character(),
##   education = col_character(),
##   wantsMore = col_character(),
##   notUsing = col_double(),
##   using = col_double()
## )</code></pre>
</div>
<div id="section-other-file-types" class="section level3">
<h3>Other file types?</h3>
<p>If you need examples of reading in other file types, email and I can add them here.</p>
The package <code>foreign</code> also contains functions to read in many data types, so you may want to check the <a href="https://www.rdocumentation.org/packages/foreign/versions/0.8-72">package documentation</a> if you want to research on your own how to read in a particular file type. 
<script type="application/shiny-prerendered" data-context="server-start">
library(learnr)
library(mosaic)
library(tidyverse)
knitr::opts_chunk$set(echo = TRUE)
terrible_demographics <- read.csv('https://docs.google.com/spreadsheets/d/e/2PACX-1vR3yEJxW6KNHE1lHPr3K-T4VZHeA_J_KGq_DUb1-Y9sYUd3IUEpliqVLVaJNa69TSRm-fm6WWWu7jS9/pub?gid=0&single=true&output=csv')
terrible_data <- read.csv('https://docs.google.com/spreadsheets/d/e/2PACX-1vTWbGAYFfuwPFciVedTUkeM8fAa6kLJ3aefGVMAz4V0O1Geb-zzDytG3lhevy8JOWV0LGgx5QUzsxFx/pub?gid=0&single=true&output=csv')
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::register_http_handlers(session, metadata = NULL)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-explore-untidy-data-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-explore-untidy-data-code-editor`)), session)
output$`tutorial-exercise-explore-untidy-data-output` <- renderUI({
  `tutorial-exercise-explore-untidy-data-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-forcats-play-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-forcats-play-code-editor`)), session)
output$`tutorial-exercise-forcats-play-output` <- renderUI({
  `tutorial-exercise-forcats-play-result`()
})
</script>
 <!--html_preserve-->
<script type="application/shiny-prerendered" data-context="dependencies">
{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["1.11.3"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/jquery"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.16"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bootstrap"]},{"type":"character","attributes":{},"value":["3.3.5"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/bootstrap"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["viewport"]}},"value":[{"type":"character","attributes":{},"value":["width=device-width, initial-scale=1"]}]},{"type":"character","attributes":{},"value":["js/bootstrap.min.js","shim/html5shiv.min.js","shim/respond.min.js"]},{"type":"character","attributes":{},"value":["css/cerulean.min.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.16"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["pagedtable"]},{"type":"character","attributes":{},"value":["1.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/pagedtable-1.1"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/pagedtable.js"]},{"type":"character","attributes":{},"value":["css/pagedtable.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.16"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["highlightjs"]},{"type":"character","attributes":{},"value":["9.12.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/highlightjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["highlight.js"]},{"type":"character","attributes":{},"value":["textmate.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.16"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial"]},{"type":"character","attributes":{},"value":["0.9.2.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial.js"]},{"type":"character","attributes":{},"value":["tutorial.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.9.2.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-autocompletion"]},{"type":"character","attributes":{},"value":["0.9.2.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-autocompletion.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.9.2.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-diagnostics"]},{"type":"character","attributes":{},"value":["0.9.2.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-diagnostics.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.9.2.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-format"]},{"type":"character","attributes":{},"value":["0.9.2.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmarkdown/templates/tutorial/resources"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-format.js"]},{"type":"character","attributes":{},"value":["tutorial-format.css","rstudio-theme.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.9.2.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["1.11.3"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/jquery"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.16"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["font-awesome"]},{"type":"character","attributes":{},"value":["5.1.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/fontawesome"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/all.css","css/v4-shims.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.16"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bootbox"]},{"type":"character","attributes":{},"value":["4.4.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/bootbox"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["bootbox.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.9.2.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["localforage"]},{"type":"character","attributes":{},"value":["1.5"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/localforage"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["localforage.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.9.2.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial"]},{"type":"character","attributes":{},"value":["0.9.2.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial.js"]},{"type":"character","attributes":{},"value":["tutorial.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.9.2.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-autocompletion"]},{"type":"character","attributes":{},"value":["0.9.2.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-autocompletion.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.9.2.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-diagnostics"]},{"type":"character","attributes":{},"value":["0.9.2.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-diagnostics.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.9.2.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.9.2.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.9.2.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.9.2.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.9.2.1"]}]}]}
</script>
<!--/html_preserve-->
<!--html_preserve-->
<script type="application/shiny-prerendered" data-context="execution_dependencies">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages","version"]},"class":{"type":"character","attributes":{},"value":["data.frame"]},"row.names":{"type":"integer","attributes":{},"value":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92]}},"value":[{"type":"character","attributes":{},"value":["assertthat","backports","base","broom","cellranger","cli","colorspace","compiler","crayon","crosstalk","curl","datasets","digest","dplyr","ellipsis","evaluate","fansi","fastmap","forcats","foreign","generics","ggdendro","ggformula","ggplot2","ggrepel","ggstance","glue","graphics","grDevices","grid","gridExtra","gtable","haven","hms","htmltools","htmlwidgets","httpuv","httr","jsonlite","knitr","later","lattice","lazyeval","leaflet","learnr","lifecycle","lubridate","magrittr","markdown","MASS","Matrix","methods","mime","modelr","mosaic","mosaicCore","mosaicData","munsell","nlme","pillar","pkgconfig","promises","purrr","R6","Rcpp","readr","readxl","rlang","rmarkdown","rprojroot","rstudioapi","rvest","scales","shiny","splines","stats","stringi","stringr","tibble","tidyr","tidyselect","tidyverse","tools","utf8","utils","vctrs","withr","xfun","xml2","xtable","yaml","zeallot"]},{"type":"character","attributes":{},"value":["0.2.1","1.1.5","3.6.1","0.5.2","1.1.0","1.1.0","1.4-1","3.6.1","1.3.4","1.0.0","4.2","3.6.1","0.6.21","0.8.3","0.3.0","0.14","0.4.0","1.0.1","0.4.0","0.8-71","0.0.2","0.1-20","0.9.2","3.2.1","0.8.1","0.3.3","1.3.1","3.6.1","3.6.1","3.6.1","2.3","0.3.0","2.1.1","0.5.1","0.4.0","1.5.1","1.5.2","1.4.1","1.6","1.25","1.0.0","0.20-38","0.2.2","2.0.2","0.9.2.1","0.1.0","1.7.4","1.5","1.1","7.3-51.4","1.2-17","3.6.1","0.7","0.1.5","1.5.0","0.6.0","0.17.0","0.5.0","3.1-140","1.4.2","2.0.3","1.1.0","0.3.2","2.4.0","1.0.2","1.3.1","1.3.1","0.4.0","1.16","1.3-2","0.10","0.3.4","1.0.0","1.4.0","3.6.1","3.6.1","1.4.3","1.4.0","2.1.3","1.0.0","0.2.5","1.2.1","3.6.1","1.1.4","3.6.1","0.2.0","2.1.2","0.10","1.2.2","1.8-4","2.2.0","0.1.0"]}]}]}
</script>
<!--/html_preserve-->
</div>
</div>

</div> <!-- topics -->

<div class="topicsContainer">
<div class="topicsPositioner">
<div class="band">
<div class="bandContent topicsListContainer">

<!-- begin doc-metadata -->
<div id="doc-metadata">
<h2 class="title toc-ignore" style="display:none;">Some Data Tidying</h2>
</div>
<!-- end doc-metadata -->

</div> <!-- bandContent.topicsListContainer -->
</div> <!-- band -->
</div> <!-- topicsPositioner -->
</div> <!-- topicsContainer -->


</div> <!-- bandContent page -->
</div> <!-- pageContent band -->




<script>
// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>

</html>
